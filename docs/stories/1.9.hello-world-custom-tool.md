# User Story: Implémentation d'un tool custom "Hello World" pour Claude Code

## ID
1.9

## Titre
Implémentation d'un tool custom "Hello World" pour Claude Code

## Description
En tant que développeur, je veux implémenter un tool custom simple "Hello World" pour Claude Code afin de valider que l'agent peut appeler des outils personnalisés selon la documentation TypeScript SDK d'Anthropic.

## Contexte
D'après la [documentation TypeScript SDK de Claude Code](https://docs.anthropic.com/en/docs/claude-code/sdk/sdk-typescript), il est possible de créer des outils personnalisés en utilisant des serveurs MCP (Model Context Protocol) intégrés au processus. Cette user story vise à implémenter le tool le plus simple possible pour valider l'intégration.

## Critères d'acceptation

### Critères fonctionnels
- [ ] Un tool custom nommé "hello_world" est implémenté
- [ ] Le tool retourne simplement "Hello World" quand il est appelé
- [ ] Le tool est accessible par l'agent Claude Code
- [ ] L'agent peut appeler le tool via une requête utilisateur
- [ ] Le tool apparaît dans la liste des outils disponibles

### Critères techniques
- [ ] Le tool utilise le SDK TypeScript de Claude Code
- [ ] Le tool est implémenté avec `createSdkMcpServer` (serveur MCP intégré au processus)
- [ ] Le tool utilise Zod pour la validation des schémas
- [ ] Le tool est configuré dans l'API route existante via `mcpServers`
- [ ] Le tool est testé et fonctionnel

### Critères de qualité
- [ ] Le code est documenté
- [ ] Les tests unitaires sont écrits
- [ ] La gestion d'erreurs est appropriée
- [ ] Le tool respecte les conventions de nommage

## Définition de Terminé (DoD)
- [ ] Le tool "hello_world" est implémenté et fonctionnel
- [ ] L'agent Claude Code peut appeler le tool avec succès
- [ ] Le tool retourne "Hello World" comme attendu
- [ ] Les tests passent
- [ ] La documentation est mise à jour
- [ ] Le code est revu et approuvé

## Estimation
**Story Points**: 3
**Temps estimé**: 4-6 heures

## Priorité
**Moyenne** - Validation technique importante mais non critique

## Dépendances
- Documentation TypeScript SDK Claude Code
- API route existante pour Claude Code
- Configuration MCP

## Risques
- **Faible**: Complexité de l'intégration MCP
- **Faible**: Compatibilité avec la version actuelle du SDK

## Notes techniques

### Implémentation prévue
1. **Création du serveur MCP**: Utiliser `createSdkMcpServer` du SDK pour un serveur intégré au processus
2. **Définition du tool**: Tool simple avec Zod schema
3. **Intégration**: Ajouter le serveur MCP dans les options de query via `mcpServers`
4. **Test**: Vérifier que l'agent peut appeler le tool

### Structure du tool
```typescript
import { createSdkMcpServer } from "@anthropic-ai/claude-code";

const helloWorldServer = createSdkMcpServer({
  name: "Hello World MCP Server",
  version: "0.0.1",
});

helloWorldServer.tool(
  "hello_world",
  'Affiche "Hello World" - tool de test simple',
  {
    // Pas de paramètres requis pour ce tool simple
  },
  async () => {
    return {
      content: [{
        type: "text",
        text: "Hello World"
      }]
    };
  }
);
```

### Intégration dans l'API
- Ajouter le serveur MCP dans les options de la fonction `query`
- Configurer `mcpServers` dans les options
- Tester l'appel du tool

## Tests
- [ ] Test unitaire du tool
- [ ] Test d'intégration avec l'agent Claude Code
- [ ] Test de l'API endpoint
- [ ] Test de gestion d'erreurs

## Documentation
- [ ] Mise à jour de la documentation technique
- [ ] Ajout d'exemples d'utilisation
- [ ] Documentation de l'architecture MCP

## Critères de succès
- L'agent Claude Code peut appeler le tool "hello_world"
- Le tool retourne "Hello World" comme attendu
- L'intégration MCP fonctionne correctement
- Le code est maintenable et extensible

## Évolution future
- Extension vers des tools plus complexes
- Support de paramètres d'entrée
- Intégration avec d'autres services
- Tools métier spécifiques au projet
